# library-system-opengauss
## 快速开始
## 一、启动opengauss容器
1.docker start opengauss2 （opengauss2是我自己起的容器名） --启动容器</br>
2.docker exec -it opengauss2 bash --进入容器</br>
3.su - omm  --用超级用户登录</br>
4.gsql -d postgres -U lcz  --（登录，这里-U后面跟你的用户名）</br>
5.此时显示 “openGauss=>” </br>
6.\c mydb --表示进入该用户下的mydb数据库（已创建）</br>
7.此时显示 “mydb=>” （4，5，6可以通过“gsql -d mydb -U lcz”一步到位）</br>
8.可以基于mydb运行SQL语句了
## 二、启动后端
- python app.py
- Ctrl+点击生成的本地网址即可开始使用

## 应用介绍
## 一、应用系统定位

本图书管理系统是一款**轻量型基础图书借阅管理工具**，是基于 Flask 的 Web 应用程序，核心目标是实现图书、读者、借阅流程的极简高效管理，适用于小型图书馆、书店、校园图书室等场景。系统聚焦 “图书信息维护 - 读者借阅 - 归还登记” 核心业务流程，保证易用性与稳定性；底层数据库采用**OpenGauss**。

## 二、核心应用需求


### 功能模块需求清单



| 模块名称   | 核心功能点                                           | 业务价值               |
| ------ | ----------------------------------------------- | ------------------ |
| 管理员模块  | 系统登录（用户名 + 密码验证）、账户状态维护                         | 保障系统操作安全性，控制管理权限   |
| 图书分类模块 | 新增分类、查询分类（支持按分类 ID / 名称检索）、删除无效分类               | 实现图书按类别管理，提升查询效率   |
| 图书管理模块 | 新增图书、查询图书（支持按 ISBN / 书名 / 作者 / 分类筛选）、更新图书库存数量   | 核心资产（图书）的全生命周期基础管理 |
| 读者管理模块 | 新增读者、查询读者（支持按读者 ID / 姓名 / 电话检索）、标记读者状态          | 建立读者档案，支撑借阅业务关联    |
| 借阅管理模块 | 借阅登记（关联图书 ID 与读者 ID）、归还登记（更新归还日期 + 借阅状态）、查询借阅记录 | 实现借阅业务核心流程闭环       |

## 三、数据库设计（OpenGauss ）

### 1. 设计原则



1. **极简核心原则**：仅保留支撑基础业务的必需字段，剔除冗余描述（如分类描述）、扩展属性（如读者地址），聚焦核心数据；

2. **数据完整性原则**：通过主键、外键、唯一约束、非空约束，保证数据关联有效性与数据质量；

3. **易用性原则**：字段命名简洁直观（如`book_id`代表图书 ID），类型选择适配实际存储需求（如电话用`VARCHAR(20)`避免数字处理问题）。

### 2. 核心实体表结构

#### （1）图书分类表（`categories`）

用于存储图书分类信息，实现图书按类别归类管理，表结构如下：



| 字段名             | 字段类型          | 约束条件                                           | 说明          | 示例值             |
| --------------- | ------------- | ---------------------------------------------- | ----------- | --------------- |
| `category_id`   | `INTEGER`     | `GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY` | 分类唯一标识，自增主键 | 1、2、3           |
| `category_name` | `VARCHAR(50)` | `NOT NULL`                                     | 分类名称，不可重复   | 计算机科学、文学小说、历史传记 |

#### （2）图书表（`books`）

存储图书核心基础信息，关联图书分类，是系统核心业务表之一：



| 字段名              | 字段类型           | 约束条件                                                    | 说明            | 示例值           |
| ---------------- | -------------- | ------------------------------------------------------- | ------------- | ------------- |
| `book_id`        | `INTEGER`      | `GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY`          | 图书唯一标识，自增主键   | 1001、1002     |
| `isbn`           | `VARCHAR(20)`  | `NOT NULL UNIQUE`                                       | 图书国际标准编号，全局唯一 | 9787111641247 |
| `book_name`      | `VARCHAR(50)` | `NOT NULL`                                              | 图书名称          | 《Java 编程思想》   |
| `author`         | `VARCHAR(20)`  | `NOT NULL`                                              | 图书作者          | Bruce Eckel   |
| `category_id`    | `INTEGER`      | `REFERENCES categories(category_id) ON DELETE SET NULL` | 关联图书分类表，外键    | 1（对应 “计算机科学”） |
| `stock_quantity` | `INTEGER`      | `NOT NULL DEFAULT 0`                                    | 图书库存数量，默认 0   | 5、10          |

#### （3）读者表（`readers`）

存储读者核心信息，用于借阅业务关联，仅保留必要的身份与联系方式：



| 字段名           | 字段类型          | 约束条件                                           | 说明                | 示例值         |
| ------------- | ------------- | ---------------------------------------------- | ----------------- | ----------- |
| `reader_id`   | `INTEGER`     | `GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY` | 读者唯一标识，自增主键       | 2001、2002   |
| `reader_name` | `VARCHAR(50)` | `NOT NULL`                                     | 读者姓名              | 张三、李四       |
| `phone`       | `VARCHAR(20)` | `UNIQUE`                                       | 读者联系电话，唯一（用于身份验证） | 13800138000 |

#### （4）借阅记录表（`borrow_records`）

记录图书借阅与归还的核心数据，关联图书与读者，是业务流程的关键表：



| 字段名           | 字段类型          | 约束条件                                                       | 说明                    | 示例值                 |
| ------------- | ------------- | ---------------------------------------------------------- | --------------------- | ------------------- |
| `record_id`   | `INTEGER`     | `GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY`             | 借阅记录唯一标识，自增主键         | 3001、3002           |
| `book_id`     | `INTEGER`     | `NOT NULL REFERENCES books(book_id) ON DELETE CASCADE`     | 关联图书表，外键（图书删除时级联删除记录） | 1001                |
| `reader_id`   | `INTEGER`     | `NOT NULL REFERENCES readers(reader_id) ON DELETE CASCADE` | 关联读者表，外键（读者删除时级联删除记录） | 2001                |
| `borrow_date` | `TIMESTAMP`   | `DEFAULT CURRENT_TIMESTAMP`                                | 借阅日期，自动记录当前时间         | 2024-05-20 14:30:00 |
| `due_date`    | `DATE`        | `NOT NULL`                                                 | 应归还日期（手动设置）           | 2024-06-19          |
| `return_date` | `DATE`        | `NULL`                                                     | 实际归还日期（未归还时为 NULL）    | 2024-06-15、NULL     |
| `status`      | `VARCHAR(10)` | `DEFAULT '未归还' CHECK (status IN ('未归还','已归还'))`            | 借阅状态（用 CHECK 约束限定值）   | 未归还、已归还             |

#### （5）管理员表（`administrators`）

存储系统管理员账户信息，用于登录验证与权限控制：



| 字段名        | 字段类型           | 约束条件                                           | 说明                        | 示例值              |
| ---------- | -------------- | ---------------------------------------------- | ------------------------- | ---------------- |
| `admin_id` | `INTEGER`      | `GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY` | 管理员唯一标识，自增主键              | 4001、4002        |
| `username` | `VARCHAR(50)`  | `NOT NULL UNIQUE`                              | 登录用户名，唯一                  | admin、lib\_admin |
| `password` | `VARCHAR(100)` | `NOT NULL`                                     | 登录密码（建议加密存储，如 MD5/SHA256） | 加密后的字符串          |
|